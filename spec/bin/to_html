#!/usr/bin/env ruby
$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '../..', 'lib')
require 'polytexnic-core'

filename = ARGV.shift
polytex = File.open(filename) { |f| f.read }
html = Polytexnic::Core::Pipeline.new(polytex).process
outfile = File.join('tmp', File.basename(filename).sub('tex', 'html'))
output = <<EOF
<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<style>
.tt { font-family: Courier; font-size: 90%; }
</style>
</head>
<body>
#{html}
</body>
EOF
File.open(outfile, 'w') { |f| f.write(output) }
